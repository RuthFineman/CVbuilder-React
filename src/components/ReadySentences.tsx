import { useEffect, useState } from "react";
import debounce from "lodash.debounce";
const Sentences: Record<string, string[]> = {
    "מתכנת": [
        "מתכנת מחשבים מנוסה, מיומן בפיתוח תוכנה מונחית עצמים ובשפות כגון Python, Java ו-JavaScript.",
        "מומחה בפיתוח אפליקציות ווב ו-Mobile, עם דגש על React ו-Node.js.",
        "ניסיון רב באינטגרציה עם API, עבודה עם מסדי נתונים SQL ו-NoSQL.",
        "בעל הבנה עמוקה באלגוריתמים, מבני נתונים ותהליכי CI/CD.",
        "מוביל צוותי פיתוח ויוזם פתרונות חדשניים לשיפור ביצועים.",
        "בעל ניסיון עם ענן (AWS/Azure) ואבטחת מידע בסיסית.",
        "חושב יצירתי, לומד מהר, ומכוון למצוינות טכנולוגית."
    ],
    "מנקה": [
        "מנקה אחראי ויעיל עם ניסיון של שנים בתחזוקת מבנים פרטיים ועסקיים.",
        "מומחה בעבודה עם חומרי ניקוי מקצועיים תוך שמירה על תקני בטיחות.",
        "שומר על סביבת עבודה נקייה, מסודרת ומזמינה.",
        "בעל מוסר עבודה גבוה, דייקנות וזמינות גבוהה.",
        "מנוסה בניקיון משרדים, חדרי מדרגות, שירותים ואזורים ציבוריים.",
        "עובד מצוין בצוות וגם באופן עצמאי, תוך עמידה בזמנים.",
        "שואף לשביעות רצון מלאה מצד הלקוח בכל משימה."
    ],
    "מורה": [
        "מורה מוסמכת עם ניסיון של מעל 10 שנים בהוראת מקצועות היסוד.",
        "בעלת גישה חינוכית סבלנית ויכולת מצוינת להנגיש חומרי לימוד.",
        "מפתחת מערכי שיעור חדשניים המותאמים לרמות שונות של תלמידים.",
        "מיומנת בשילוב כלים דיגיטליים וסביבות למידה מקוונות.",
        "מקדמת אקלים כיתתי חיובי ומעודדת חשיבה ביקורתית.",
        "יוצרת קשר אישי וחינוכי עם תלמידים והורים כאחד.",
        "שואפת לטפח מצוינות לימודית וערכית בקרב תלמידיה."
    ],
    "מזכירות": [
        "מזכירה מנוסה בניהול משרד שוטף, תיאום יומנים ותמיכה אדמיניסטרטיבית.",
        "שליטה מלאה ביישומי Office ובמערכות ניהול מסמכים.",
        "תקשורת בין-אישית מצוינת ויכולת עבודה תחת לחץ.",
        "אחריות מלאה על מענה טלפוני, תיאום פגישות והפקת דו\"חות.",
        "ניסיון בשירות לקוחות ומענה לצרכים משתנים של הנהלה וצוות.",
        "דיסקרטית, מאורגנת ובעלת גישה שירותית גבוהה.",
        "פועלת לקידום סביבה משרדית יעילה ומסודרת."
    ],
    "עורך דין": [
        "עורך דין מוסמך בעל התמחות בדין האזרחי ובמסחרי.",
        "ניסיון בליטיגציה, ניסוח חוזים ומתן ייעוץ משפטי שוטף.",
        "בקיא בהליכים משפטיים ובהופעה בבתי משפט ובוועדות.",
        "בעל יכולת ניתוח גבוהה וראייה אסטרטגית לטובת הלקוח.",
        "מיומן בניהול מו\"מ מורכבים והגנה על זכויות משפטיות.",
        "דקדקן בפרטים, שומר על חיסיון וסטנדרטים אתיים מחמירים.",
        "מחויב למצוינות, אמינות ושירות מקצועי ברמה הגבוהה ביותר."
    ],
    "רואה חשבון": [
        "רואה חשבון מוסמך עם ניסיון בביקורת דוחות כספיים ועריכת מאזנים.",
        "מומחה בניתוחים פיננסיים, תקציב ובקרה תקציבית.",
        "שליטה מלאה בתקנות מס, חשבונאות בינלאומית ודיני עבודה.",
        "ניסיון בעבודה עם תוכנות הנה\"ח כגון חשבשבת, SAP ו-Excel מתקדם.",
        "מספק ייעוץ פיננסי ותכנון מס ליחידים וחברות.",
        "מקפיד על דיוק, עמידה בלוחות זמנים ושמירה על כללי אתיקה מקצועית.",
        "עובד עצמאי או כחלק מצוות, עם כישורים בין-אישיים מעולים."
    ]
};

interface Props {
    onSelect: (sentence: string) => void;
  }
export default function ReadySentences({ onSelect }: Props) {
  const [searchTerm, setSearchTerm] = useState("");
  const [filteredSentences, setFilteredSentences] = useState<string[]>([]);

  const handleSearch = debounce((term: string) => {
    const matchedKeys = Object.keys(Sentences).filter((key) =>
      key.startsWith(term)
    );
    const allMatches = matchedKeys.flatMap((key) => Sentences[key]);
    setFilteredSentences(allMatches);
  }, 200);

  useEffect(() => {
    if (searchTerm.trim() === "") {
      setFilteredSentences([]);
      return;
    }
    handleSearch(searchTerm.trim());
  }, [searchTerm]);

  return (
    <div className="ready-sentences" style={{ marginTop: "10px" }}>
      <input
        type="text"
        placeholder="הכנס תפקיד (למשל: מתכנת, מורה...)"
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        style={{ width: "100%", padding: "8px", marginBottom: "10px" }}
      />
      <ul style={{ listStyle: "none", padding: 0 }}>
        {filteredSentences.map((sentence, index) => (
          <li
            key={index}
            onClick={() => onSelect(sentence)}
            style={{
              padding: "8px",
              background: "#f1f1f1",
              marginBottom: "5px",
              cursor: "pointer",
              borderRadius: "5px"
            }}
          >
            {sentence}
          </li>
        ))}
      </ul>
    </div>
  );
}
